<template>
  <section class="signup-content">
    <div class="page-header">
      <h2 class="header">
        About you üìö
      </h2>
      <p>
        nwHacks is Western Canada‚Äôs largest collegiate hackathon taking place on January 11th - 12th, 2020 at the University of British Columbia. We focus on creating a quality hackathon experience all of our attendees but historically we've had more applicants than we would be able to accommodate at our event. So, for a fair assessment of your application, we encourage you to put your best foot forward on this journey! ‚õ∞Ô∏è
      </p>
    </div>
    <div style="display: flex;">
      <b-field
        label="What is your full legal name?"
        :type="v.hacker.firstname.$error ? 'is-danger' : ''"
        :message="v.hacker.firstname.$error ? (!v.hacker.firstname.required ? 'Required' : '‚Äé') : '.'"
        style="width: 35%;"
        class="name-field"
      >
        <b-input v-model.trim="v.hacker.firstname.$model" placeholder="First Name" />
      </b-field>
      <b-field
        :label="'‚Äè‚Äè‚Äé ‚Äé'"
        :type="v.hacker.lastname.$error ? 'is-danger' : ''"
        :message="v.hacker.lastname.$error ? (!v.hacker.lastname.required ? 'Required' : '') : '.'"
        style="margin-left: 5%; width: 35%;"
        class="name-field"
      >
        <b-input v-model.trim="v.hacker.lastname.$model" placeholder="Last Name" />
      </b-field>
    </div>
    <b-field
      label="What is your Email?"
      :type="v.hacker.email.$error ? 'is-danger' : ''"
      :message="v.hacker.email.$error ? (!v.hacker.email.required ? 'Required' : (!v.hacker.email.email ? 'Please enter a valid email' : '')) : ''"
    >
      <b-input
        v-model.trim="v.hacker.email.$model"
        placeholder="hacker@email.com"
        type="email"
      />
    </b-field>

    <b-field
      label="What is your Phone Number? (format: ###-###-####)"
      :type="v.hacker.phonenumber.$error ? 'is-danger' : ''"
      :message="v.hacker.phonenumber.$error ? (!v.hacker.phonenumber.required ? 'Required' : (!v.hacker.phonenumber.isPhoneNumberFormat ? 'Incorrect format' : '')) : ''"
    >
      <b-input v-model.trim="v.hacker.phonenumber.$model" placeholder="000-000-0000" maxlength="12" />
    </b-field>

    <b-field
      label="Which gender do you identify as?"
      :type="v.hacker.gender.$error ? 'is-danger' : ''"
      :message="v.hacker.gender.$error ? (!v.hacker.gender.required ? 'Required' : (!v.hacker.gender.matchesDropdown ? 'Required' : '')) : ''"
    >
      <b-select v-model.trim="v.hacker.gender.$model" placeholder="Select an option">
        <option value="female">
          Female
        </option>
        <option value="male">
          Male
        </option>
        <option value="non-binary">
          Non-Binary
        </option>
        <option value="prefer not to specify">
          Prefer not to specify
        </option>
        <option value="other">
          Other
        </option>
      </b-select>
    </b-field>

    <b-field
      v-if="v.hacker.gender.$model === 'other'"
      label="Please specify your gender"
      :type="v.hacker.genderother.$error ? 'is-danger' : ''"
      :message="v.hacker.genderother.$error ? (!v.hacker.genderother.required ? 'Required' : '') : ''"
    >
      <b-input v-model.trim="v.hacker.genderother.$model" />
    </b-field>

    <b-field
      label="What is your race / ethnicity?"
      :type="v.hacker.ethnicity.$error ? 'is-danger' : ''"
      :message="v.hacker.ethnicity.$error ? (!v.hacker.ethnicity.required ? 'Required' : (!v.hacker.ethnicity.matchesDropdown ? 'Required' : '')) : ''"
    >
      <b-select v-model.trim="v.hacker.ethnicity.$model" placeholder="Select an option">
        <option value="american indian">
          American Indian
        </option>
        <option value="alaskan native">
          Alaskan Native
        </option>
        <option value="asian / pacific islander">
          Asian / Pacific Islander
        </option>
        <option value="black or african american">
          Black or African American
        </option>
        <option value="hispanic">
          Hispanic
        </option>
        <option value="white / caucasian">
          White / Caucasian
        </option>
        <option value="multiple ethnicity">
          Multiple Ethnicity
        </option>
        <option value="other">
          Other
        </option>
        <option value="prefer not to answer">
          Prefer not to answer
        </option>
      </b-select>
    </b-field>

    <b-field
      v-if="v.hacker.ethnicity.$model === 'other'"
      label="Ethnicity (Please Specify)"
      :type="v.hacker.ethnicityother.$error ? 'is-danger' : ''"
      :message="v.hacker.ethnicityother.$error ? (!v.hacker.ethnicityother.required ? 'Required' : '') : ''"
    >
      <b-input v-model.trim="v.hacker.ethnicityother.$model" />
    </b-field>

    <b-field
      label="Will you be 19 years of age or older by January 11th, 2020?"
      :type="v.hacker.over19.$error ? 'is-danger' : ''"
      :message="v.hacker.over19.$error ? (!v.hacker.over19.required ? 'Required' : (!v.hacker.over19.matchesRadio ? 'Required' : '')) : ''"
    >
      <div class="field-content">
        <b-radio v-model.trim="v.hacker.over19.$model" name="over19" native-value="yes">
          Yes
        </b-radio>
        <b-radio v-model.trim="v.hacker.over19.$model" name="over19" native-value="no">
          No
        </b-radio>
      </div>
    </b-field>
    <b-field
      label="What level of education are you currently studying at?"
      :type="v.hacker.education.$error ? 'is-danger' : ''"
      :message="v.hacker.education.$error ? (!v.hacker.education.required ? 'Required' : (!v.hacker.education.matchesDropdown ? 'Required' : '')) : ''"
    >
      <b-select v-model.trim="v.hacker.education.$model" placeholder="Select an option">
        <option value="high school">
          High School
        </option>
        <option value="undergraduate">
          Undergraduate
        </option>
        <option value="graduate">
          Graduate
        </option>
      </b-select>
    </b-field>

    <b-field
      label="What school do you currently attend?"
      :type="v.hacker.school.$error ? 'is-danger' : ''"
      :message="v.hacker.school.$error ? (!v.hacker.school.required ? 'Required' : '') : ''"
    >
      <autocomplete
        :source="schools"
        input-class="field"
        placeholder="Enter your school"
        :value="v.hacker.school.$model"
        @selected="schoolSelected"
        @clear="schoolClear"
      />
    </b-field>

    <b-field
      v-if="v.hacker.school.$model === 'Other'"
      label="Specify your school"
      :type="v.hacker.schoolother.$error ? 'is-danger' : ''"
      :message="v.hacker.schoolother.$error ? (!v.hacker.schoolother.required ? 'Required' : '') : ''"
    >
      <b-input v-model.trim="v.hacker.schoolother.$model" />
    </b-field>

    <b-field
      label="What is your current/intended major?"
      name="high-school-major"
      :type="v.hacker.major.$error ? 'is-danger' : ''"
      :message="v.hacker.major.$error ? (!v.hacker.major.required ? 'Required' : '') : ''"
    >
      <autocomplete
        :source="majors"
        input-class="field"
        placeholder="Enter your area of study"
        @clear="majorClear"
        @selected="majorSelected"
      />
    </b-field>

    <b-field
      label="What is your graduation year?"
      :type="v.hacker.gradyear.$error ? 'is-danger' : ''"
      :message="v.hacker.gradyear.$error ? (!v.hacker.gradyear.required ? 'Required' : (!v.hacker.gradyear.withinValidRange ? 'Not valid year' : '')) : ''"
    >
      <b-input v-model.trim="v.hacker.gradyear.$model" min="1900" max="2027" type="number" controls-position="compact" />
    </b-field>

    <b-field
      label="Where are you traveling from?"
      :type="v.hacker.city.$error ? 'is-danger' : ''"
      :message="v.hacker.city.$error ? (!v.hacker.city.required ? 'Required' : '') : ''"
    >
      <b-input v-model.trim="v.hacker.city.$model" placeholder="Enter your city and province/state" />
    </b-field>

    <b-field
      label="Would you like to apply for travel reimbursement? (if you are coming from the University of Washington, or the surrounding area, we will be providing a shuttle bus)"
      :type="v.hacker.travel.$error ? 'is-danger' : ''"
      :message="v.hacker.travel.$error ? (!v.hacker.travel.required ? 'Required' : (!v.hacker.travel.matchesRadio ? 'Required' : '')) : ''"
    >
      <div class="is-block field-content radio-stack">
        <b-radio v-model.trim="v.hacker.travel.$model" name="travel" native-value="no" class=" full-width">
          No
        </b-radio>
        <b-radio v-model.trim="v.hacker.travel.$model" name="travel" native-value="travel reimbursement" class=" ull-width">
          Yes I would like to apply for a travel reimbursement
        </b-radio>
        <b-radio v-model.trim="v.hacker.travel.$model" name="travel" native-value="shuttle bus" class="full-width">
          Yes I would like a seat on the bus from the Seattle/UW area
        </b-radio>
      </div>
    </b-field>
  </section>
</template>

<script>
import Autocomplete from 'vuejs-auto-complete'
import schools from '../../data/schools.json'
import majors from '../../data/majors.json'

export default {
  components: {
    Autocomplete
  },
  props: {
    v: {
      type: Object,
      required: true
    }
  },
  data: function () {
    return {
      schools: schools,
      majors: majors
    }
  },
  methods: {
    schoolClear() {
      this.v.hacker.school.$model = ''
    },
    schoolSelected(value) {
      this.v.hacker.school.$model = value.display
    },
    majorClear() {
      this.v.hacker.major.$model = ''
    },
    majorSelected(value) {
      this.v.hacker.major.$model = value.display
    }
  }
}
</script>

<style lang="scss" scoped>

.name-field {
  margin-bottom: 0;
}

.display-block {
    display: block !important;
}
.inline-radio {
    display: inline-flex !important;
}
.full-width {
    width: 100%;
}
.radio-stack .radio {
    margin: 5px 0 !important;
}
</style>
